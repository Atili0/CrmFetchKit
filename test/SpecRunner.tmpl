<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrmFetchKit-{{version}} Test Runner</title>

    <style type="text/css">
      @@include("../bower_components/mocha/mocha.css");
    </style>
  </head>

  <body>
    <div id="mocha"></div>

    <script>
      @@include("../bower_components/underscore/underscore-min.js")
      @@include("../bower_components/mocha/mocha.js")
      @@include("../bower_components/jquery/dist/jquery.min.js")
      @@include("../bower_components/chai/chai.js")

      @@include("helpers/CrmRestKit-2.6.1.min.js")
      @@include("helpers/specUtil.js")

      @@include("../src/CrmFetchKit.min.js")
    </script>

    <!-- setup mocha- otherwise "describe" is not defined -->
    <script>mocha.setup('bdd')</script>

    @@if (context.name === 'integration') {
      <!-- this script is only requried when the executing the tests in integration mode-->
      <script src="ClientGlobalContext.js.aspx" type="text/javascript"></script>
    }

    <!-- specifications -->
    <script>

      @@if (context.name === 'integration') {
        @@include("spec/integrationSpec.js")
      }
      @@if (context.name === 'unit') {
        @@include("spec/unitSpec.js")
      }
    </script>

    <script>
      if (window.mochaPhantomJS) {
        mochaPhantomJS.run();
      } else {
        mocha.run();
      }
    </script>
  </body>
</html>
